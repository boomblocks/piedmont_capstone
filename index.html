<!DOCTYPE html>
<html>
	<head>
		<!--<script type="module" src="./js/nodejs/node_modules/npm/index.js"></script>-->
		<script src="./js/index.js"></script>
		<script src="./js/audio_handling.js"></script>
		<link href="./css/fresh.css" rel="stylesheet">
	</head>
	<body>
		<script>
			//initial styling
			document.body.style.backgroundColor = '#f0f0f0';
		</script>
		<div class="header">
			<button id=test onclick="Test();">Test</button>
			<button id=test onclick="lava();">Lava!</button>
			<button id='play' onclick="Play();">Play Sound</button>
			<p id= >header</p>
		</div>
		<div id="toybox1">
		</div>
		<div id="container">
			<div id="toybox2">
			</div>
			<div id="toybox3">
			</div>
		</div>
		<script>
			//TEMPORARY
			for (let i=0;i!=6;i++){Test();}
		
			function lava(){
				if (!(TestClicked)){
					TestClicked = true;
					lava_act();
				} else {
					TestClicked = false;
					for (c in all_buttons){
						all_buttons[c].style.backgroundColor = button_history.get(all_buttons[c])['color'];
						
					}
				}
			}
			function lava_act() {
				for (c in all_buttons){
					//console.log(all_buttons[c]);
					if (!(all_buttons[c] === null)){
						//let channel = button_history.get(all_buttons[c])['channel']
						all_buttons[c].style.backgroundColor = 'red';
						//button_history.set(all_buttons[c], {color: 'red', channel: channel});
					}
				}
			}
			function Play(button){
				if (!(button_history.get(button)['quiet_bool'])){
					let chan = button_history.get(button)['channel'];
					console.log(channel_history.get(chan));
					if (chan){
						if (channel_history.get(chan)['synth_bool']){
							console.log('handling a synth...')
							//update button history for current_context
						} else {
							if ((!(channel_history.get(chan)['soundfile']==null))&&(!(channel_history.get(chan)['soundfile']=='null'))){
								let sound = new Audio(channel_history.get(chan)['soundfile']);
								sound.play();
							}
						}
					}
				}
			}
		</script>
	</body>
</html>